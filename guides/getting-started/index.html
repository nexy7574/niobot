
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../../reference/attachment/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Getting started / quick start - Nio-Bot Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-quick-start" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Nio-Bot Docs" class="md-header__button md-logo" aria-label="Nio-Bot Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nio-Bot Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting started / quick start
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/EEKIM10/niobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Nio-Bot Docs" class="md-nav__button md-logo" aria-label="Nio-Bot Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Nio-Bot Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EEKIM10/niobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Index
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting started / quick start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Getting started / quick start
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-start-of-your-bot" class="md-nav__link">
    Creating the start of your bot
  </a>
  
    <nav class="md-nav" aria-label="Creating the start of your bot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-structure" class="md-nav__link">
    File structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-configpy" class="md-nav__link">
    Setting up config.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-the-bot-runtime-file" class="md-nav__link">
    Making the bot runtime file
  </a>
  
    <nav class="md-nav" aria-label="Making the bot runtime file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-logging" class="md-nav__link">
    Enabling logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-funpy" class="md-nav__link">
    Making fun.py
  </a>
  
    <nav class="md-nav" aria-label="Making fun.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#but-wait-theres-more" class="md-nav__link">
    But wait, there's more!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-command-to-funpy" class="md-nav__link">
    Adding a command to fun.py
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-bot" class="md-nav__link">
    Starting the bot
  </a>
  
    <nav class="md-nav" aria-label="Starting the bot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-an-access-token" class="md-nav__link">
    Getting an access token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actually-running-the-bot" class="md-nav__link">
    Actually running the bot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interesting-log-output" class="md-nav__link">
    Interesting log output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#and-thats-it" class="md-nav__link">
    And that's it!
  </a>
  
    <nav class="md-nav" aria-label="And that's it!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wait-how-do-i-use-it" class="md-nav__link">
    Wait, how do I use it?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-product" class="md-nav__link">
    Final product
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/attachment/" class="md-nav__link">
        Attachments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/client/" class="md-nav__link">
        Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/commands/" class="md-nav__link">
        Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/context/" class="md-nav__link">
        Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/federation/" class="md-nav__link">
        Federation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/help_command/" class="md-nav__link">
        The help command
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/parsers/" class="md-nav__link">
        Parsers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/string_view/" class="md-nav__link">
        String View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/typing/" class="md-nav__link">
        Typing helper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/unblock/" class="md-nav__link">
        Unblock
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-start-of-your-bot" class="md-nav__link">
    Creating the start of your bot
  </a>
  
    <nav class="md-nav" aria-label="Creating the start of your bot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-structure" class="md-nav__link">
    File structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-configpy" class="md-nav__link">
    Setting up config.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-the-bot-runtime-file" class="md-nav__link">
    Making the bot runtime file
  </a>
  
    <nav class="md-nav" aria-label="Making the bot runtime file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-logging" class="md-nav__link">
    Enabling logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-funpy" class="md-nav__link">
    Making fun.py
  </a>
  
    <nav class="md-nav" aria-label="Making fun.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#but-wait-theres-more" class="md-nav__link">
    But wait, there's more!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-command-to-funpy" class="md-nav__link">
    Adding a command to fun.py
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-bot" class="md-nav__link">
    Starting the bot
  </a>
  
    <nav class="md-nav" aria-label="Starting the bot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-an-access-token" class="md-nav__link">
    Getting an access token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actually-running-the-bot" class="md-nav__link">
    Actually running the bot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interesting-log-output" class="md-nav__link">
    Interesting log output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#and-thats-it" class="md-nav__link">
    And that's it!
  </a>
  
    <nav class="md-nav" aria-label="And that's it!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wait-how-do-i-use-it" class="md-nav__link">
    Wait, how do I use it?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-product" class="md-nav__link">
    Final product
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="getting-started-quick-start">Getting started / quick start<a class="headerlink" href="#getting-started-quick-start" title="Permanent link">&para;</a></h1>
<div class="admonition warning">
<p class="admonition-title">Unfinished guide</p>
<p>This guide is not yet finished.</p>
</div>
<p>So, you've joined matrix, had a look around, and now you want to make your own little bot?
Guess what, you can do just that with nio-bot!</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>You will need the following in general:</p>
<ul>
<li>A matrix account you can log into (username and password initially)</li>
</ul>
<p>And the following installed on the machine you want to run the bot on:</p>
<ul>
<li>Python 3.11 or higher with sqlite support</li>
<li><code>libolm</code> (use your system package manager, like apt or pacman) in order to use end-to-end encryption.</li>
<li>A decent network connection (at <em>least</em> a few megabits a second, preferably more)</li>
<li>At least 100mb free storage space (for the database and other files)</li>
</ul>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>After you've installed and acquired the above, you can install nio-bot with the following command:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/EEKIM10/nio-bot.git#egg<span class="o">=</span>nio-bot<span class="o">[</span>cli<span class="o">]</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1"># Note that we install the extras for `cli` here - the niobot CLI comes with a bunch of useful tools we&#39;ll use.</span>
</span></code></pre></div>
If you would like to install support for end-to-end encryption, you can install the following instead:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/EEKIM10/nio-bot.git#egg<span class="o">=</span>nio-bot<span class="o">[</span>cli,e2ee<span class="o">]</span>
</span></code></pre></div></p>
<p>After you've done that, verify everything installed fine by running <code>niocli version</code>:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">(</span>venv<span class="o">)</span><span class="w"> </span><span class="o">[</span>me@host<span class="w"> </span>test-niobot<span class="o">]</span>$<span class="w"> </span>niocli<span class="w"> </span>version
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>NioBot<span class="w"> </span>version:<span class="w"> </span><span class="m">0</span>.1.dev115+g5af233e<span class="w"> </span><span class="o">(</span>Version<span class="w"> </span><span class="m">0</span>.1,<span class="w"> </span>build<span class="w"> </span>dev115,<span class="w"> </span>commit<span class="w"> </span><span class="s1">&#39;5af233e&#39;</span>,<span class="w"> </span>built<span class="w"> </span><span class="s1">&#39;04/07/230&#39;</span><span class="o">)</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>matrix-nio<span class="w"> </span>version:<span class="w"> </span><span class="m">0</span>.20.2
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>Python<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.3
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>Python<span class="w"> </span>implementation:<span class="w"> </span>CPython
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>Operating<span class="w"> </span>System:<span class="w"> </span>Linux-6.4.1-arch1-1-x86_64-with-glibc2.37
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>Architecture:<span class="w"> </span>x86_64
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>OLM<span class="w"> </span>Installed:<span class="w"> </span>Yes
</span></code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Yes, this output is long and verbose. It is intentionally long and verbose in order to provide as much
information as possible for bug reports. All you need to do is make sure there aren't too many red flags.</p>
<p>For example, if you want end to end encryption, but <code>OLM Installed</code> is a red <code>No</code>, then you need to install
<code>libolm</code>.</p>
</div>
<details class="warning">
<summary>My architecture is red!</summary>
<p>You will notice any sort of other architecture outside of <code>x86_64</code> is red - this does not mean that nio-bot won't
work! Currently, nio-bot is mainly developed on an AMD64 architecture, so support is only officially for that
arch. However, several people have run nio-bot on ARM64 (raspberry pi, at least), and it works fine.</p>
<p>You can safely ignore this warning if you are running on a different architecture.</p>
<p>If anything else is red though, you should look into it.</p>
</details>
<h2 id="creating-the-start-of-your-bot">Creating the start of your bot<a class="headerlink" href="#creating-the-start-of-your-bot" title="Permanent link">&para;</a></h2>
<p>In our instance here, we'll create a few files:</p>
<ol>
<li>A <code>config.py</code> file to store our configuration.</li>
<li>A <code>main.py</code> file to store our bot code.</li>
<li>A <code>fun.py</code> file to store a module (later on).</li>
</ol>
<p>And you'll need a directory:</p>
<ol>
<li><code>store</code> - this is where nio-bot will store its database and other files.</li>
</ol>
<h3 id="file-structure">File structure<a class="headerlink" href="#file-structure" title="Permanent link">&para;</a></h3>
<p>And as such, our directory structure will look like this:
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>test-niobot/
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>├── config.py
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>├── fun.py
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>├── requirements.txt
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>├── store/
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>└── main.py
</span></code></pre></div></p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Make sure, if you are using version control, to add <code>config.py</code> to your <code>.gitignore</code> file! This file contains
all of your personal information, such as your password, and should not be shared with anyone.</p>
<p>While you're at it, you should add the <code>store</code> directory to your <code>.gitignore</code> file as well, as that will contain
encryption keys later on.</p>
</div>
<h3 id="setting-up-configpy">Setting up config.py<a class="headerlink" href="#setting-up-configpy" title="Permanent link">&para;</a></h3>
<p>In our <code>config.py</code> file, we'll add the following:
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">HOMESERVER</span> <span class="o">=</span> <span class="s2">&quot;https://matrix.org&quot;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">USER_ID</span> <span class="o">=</span> <span class="s2">&quot;@my-username:matrix.org&quot;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">PASSWORD</span> <span class="o">=</span> <span class="s2">&quot;my-password&quot;</span>
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure to replace the above with your own homeserver, user ID, and password!</p>
</div>
<h3 id="making-the-bot-runtime-file">Making the bot runtime file<a class="headerlink" href="#making-the-bot-runtime-file" title="Permanent link">&para;</a></h3>
<p>And, to make a simple bot, you can just copy the below template into your <code>main.py</code> file:
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">import</span> <span class="nn">niobot</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">import</span> <span class="nn">config</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">bot</span> <span class="o">=</span> <span class="n">niobot</span><span class="o">.</span><span class="n">NioBot</span><span class="p">(</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="n">homeserver</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">HOMESERVER</span><span class="p">,</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">USER_ID</span><span class="p">,</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="n">device_id</span><span class="o">=</span><span class="s1">&#39;my-device-id&#39;</span><span class="p">,</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="n">store_path</span><span class="o">=</span><span class="s1">&#39;./store&#39;</span><span class="p">,</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    <span class="n">command_prefix</span><span class="o">=</span><span class="s2">&quot;!&quot;</span><span class="p">,</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>    <span class="n">owner_id</span><span class="o">=</span><span class="s2">&quot;@my-matrix-username:matrix.org&quot;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="p">)</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="c1"># We also want to load `fun.py`&#39;s commands before starting:</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">bot</span><span class="o">.</span><span class="n">mount_module</span><span class="p">(</span><span class="s2">&quot;fun&quot;</span><span class="p">)</span>  <span class="c1"># looks at ./fun.py</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;ready&quot;</span><span class="p">)</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">on_ready</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>    <span class="c1"># That first argument is needed as the first result of the sync loop is passed to ready. Without it, this event</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>    <span class="c1"># will fail to fire, and will cause a potentially catasrophic failure.</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bot is ready!&quot;</span><span class="p">)</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">ping</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>  <span class="c1"># can be invoked with &quot;!ping&quot;</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s2">&quot;Pong!&quot;</span><span class="p">)</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="n">bot</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">PASSWORD</span><span class="p">)</span>
</span></code></pre></div></p>
<details class="warning" open="open">
<summary>About <code>owner_id</code></summary>
<p><code>owner_id</code> is intended to tell nio-bot who owns the current instance.
<strong>Do not set this to be the same thing as <code>config.USER_ID</code> (your bot's ID)!</strong>
The only time you should do that is if you want to run the bot on the same account you use.</p>
<p>Otherwise, set this to be your own user ID, so that you can use any "owner only" commands.</p>
<p>It is not necessary to set this though, so it can be omitted or set to <code>None</code>. Just note that
<code>NioBot.is_owner(...)</code> will raise an error when used.</p>
</details>
<h4 id="enabling-logging">Enabling logging<a class="headerlink" href="#enabling-logging" title="Permanent link">&para;</a></h4>
<p>You'll probably find that it's useful to enable debug logging while you're developing your bot. To do that, you can
add the following to your <code>main.py</code> file:
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span> <span class="nn">logging</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">import</span> <span class="nn">niobot</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1"># or to save to a file (uncomment):</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1"># logging.basicConfig(level=logging.DEBUG, filename=&quot;bot.log&quot;)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">bot</span> <span class="o">=</span> <span class="n">niobot</span><span class="o">.</span><span class="n">NioBot</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="o">...</span>
</span></code></pre></div></p>
<h3 id="making-funpy">Making fun.py<a class="headerlink" href="#making-funpy" title="Permanent link">&para;</a></h3>
<p>Now, fun.py is going to be a module.</p>
<p>Modules are a great way to organize your code, and make it easier to manage. They also allow you to
easily add new commands to your bot without having to edit the main file, which means you can split your code up, and
make it... modular!</p>
<p>To start, we need to make the fun.py python file, and add the following:
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">import</span> <span class="nn">niobot</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">class</span> <span class="nc">MyFunModule</span><span class="p">(</span><span class="n">niobot</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>  <span class="c1"># subclassing niobot.Module is mandatory for auto-detection.</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">):</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="n">bot</span>  <span class="c1"># bot is the NioBot instance you made in main.py!</span>
</span></code></pre></div>
And that's it! You made your module!</p>
<h4 id="but-wait-theres-more">But wait, there's more!<a class="headerlink" href="#but-wait-theres-more" title="Permanent link">&para;</a></h4>
<p>You may notice that with this being a separate module, you can't use <code>@bot.command</code>, or <code>@bot.on_event</code>, or reference
<code>bot</code> at all!</p>
<p>You'd initially assume "Oh, I'll just import bot from main." - but that's not going to work. The reason for this is
every time <code>main.py</code> is imported, it creates a new <a class="autorefs autorefs-internal" href="../../reference/client/#niobot.client.NioBot"><code>NioBot</code></a>, and then... calls bot.run() at the end, meaning not only
would your import never finish, but it would also cause a massive recursion bug!</p>
<p>The way you get around this is instead with <code>@niobot.command()</code>. This is a decorator that will register the command
with the bot, however is designed specifically with modules in mind.</p>
<p>Let's compare the two, for simplicity:</p>
<table>
<thead>
<tr>
<th><code>@niobot.NioBot.command()</code></th>
<th><code>@niobot.command()</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>Adds commands to the register immediately</td>
<td>Adds commands to the register once the module is loaded</td>
</tr>
<tr>
<td>Can only be used at runtime, or wherever <code>bot</code> can be imported from</td>
<td>Can only be used in modules (<strong>has no effect outside a<code>niobot.Module</code>!</strong>)</td>
</tr>
<tr>
<td>Takes priority over <code>@niobot.command()</code> due to the immediate register</td>
<td>Lower priority than <code>NioBot.command()</code> due to the "lazy loading"</td>
</tr>
</tbody>
</table>
<p>Do be aware though, both decorators will take the exact same arguments as <a class="autorefs autorefs-internal" href="../../reference/commands/#niobot.commands.Command"><code>niobot.Command</code></a>.</p>
<h4 id="adding-a-command-to-funpy">Adding a command to fun.py<a class="headerlink" href="#adding-a-command-to-funpy" title="Permanent link">&para;</a></h4>
<p>So, let's add a command to our module:
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">import</span> <span class="nn">niobot</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">class</span> <span class="nc">MyFunModule</span><span class="p">(</span><span class="n">niobot</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>  <span class="c1"># subclassing niobot.Module is mandatory for auto-detection.</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">):</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="n">bot</span>  <span class="c1"># bot is the NioBot instance you made in main.py!</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="nd">@niobot</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">!&quot;</span> <span class="o">%</span> <span class="n">ctx</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
</span></code></pre></div>
This will add a command, <code>!hello</code>, that will reply with "Hello {@author}!"</p>
<h3 id="starting-the-bot">Starting the bot<a class="headerlink" href="#starting-the-bot" title="Permanent link">&para;</a></h3>
<p>Hold your horses, you're not quite ready yet!</p>
<p>Generally, it's a terrible idea to always use a password in your code. It's a security risk,
and in matrix it can result in creating many sessions, which you don't want, especially if you're using encryption!</p>
<h4 id="getting-an-access-token">Getting an access token<a class="headerlink" href="#getting-an-access-token" title="Permanent link">&para;</a></h4>
<p>An access token is like a server-generated long-lived password. You will probably want one in order to repeatedly use
the same session, and to avoid having to use your password in your code.</p>
<p>You can get your password with <code>niocli get-access-token</code>.
For example:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="o">(</span>venv<span class="o">)</span><span class="w"> </span><span class="o">[</span>me@host<span class="w"> </span>test-niobot<span class="o">]</span>$<span class="w"> </span>niocli<span class="w"> </span>get-access-token
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>User<span class="w"> </span>ID<span class="w"> </span><span class="o">(</span>@username:homeserver.tld<span class="o">)</span>:<span class="w"> </span>@test:matrix.org
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Password<span class="w"> </span><span class="o">(</span>will<span class="w"> </span>not<span class="w"> </span><span class="nb">echo</span><span class="o">)</span>:<span class="w"> </span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Device<span class="w"> </span>ID<span class="w"> </span><span class="o">(</span>a<span class="w"> </span>memorable<span class="w"> </span>display<span class="w"> </span>name<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>login,<span class="w"> </span>such<span class="w"> </span>as<span class="w"> </span><span class="s1">&#39;bot-production&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">[</span>host<span class="o">]</span>:<span class="w"> </span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>Resolving<span class="w"> </span>homeserver...<span class="w"> </span>OK
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>Getting<span class="w"> </span>access<span class="w"> </span>token...<span class="w"> </span>OK
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>Access<span class="w"> </span>token:<span class="w"> </span>syt_&lt;...&gt;
</span></code></pre></div></p>
<p>What you're going to do now, is copy the full access token string, and open <code>config.py</code> again
Now, replace <code>PASSWORD=...</code> with <code>ACCESS_TOKEN="syt_&lt;...&gt;"</code>. Make sure to keep the quotes!</p>
<p>You will also need to go into <code>main.py</code>, down to the last line, and replace <code>password=config.PASSWORD</code> with
<code>access_token=config.ACCESS_TOKEN</code>.</p>
<details class="question">
<summary>What is <code>sso_token</code>?</summary>
<p>SSO token is a <code>S</code>ingle <code>S</code>ign <code>O</code>n token, employed by the likes of Mozilla, and is often used for SAML.
Chances are, if you don't know what it is, you definitely don't need it.
And if you do need it, you already know what it is, why you need it, and how to get it.</p>
</details>
<h4 id="actually-running-the-bot">Actually running the bot<a class="headerlink" href="#actually-running-the-bot" title="Permanent link">&para;</a></h4>
<p>This is the really simple part, actually. All you need to do now is run <code>main.py</code>!</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="o">(</span>venv<span class="o">)</span><span class="w"> </span><span class="o">[</span>me@host<span class="w"> </span>test-niobot<span class="o">]</span>$<span class="w"> </span>python<span class="w"> </span>main.py
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>&lt;insert<span class="w"> </span>log<span class="w"> </span>spam<span class="w"> </span>here&gt;
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>Bot<span class="w"> </span>is<span class="w"> </span>ready!
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>&lt;insert<span class="w"> </span>log<span class="w"> </span>spam<span class="w"> </span>here&gt;
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Its taking FOREVER to log in! is something going wrong?</p>
<p>Nope. It can often take a while (upwards of five minutes in some cases!) for the bot to log in.
This is because, when you first start the bot, it has to <em>sync</em> your entire state with the server.
This often results in a LOT of IO, and a lot of network waiting, etc.</p>
<p>You can speed up this process in the future by:</p>
<ul>
<li>Making sure you have <code>store_path</code> and a valid store in your configuration. Stores mean that the bot doesn't have
  to re-sync everything every time it starts up.</li>
<li>Using an access token instead of a password. This means that the bot doesn't have to log in, and can just start
  syncing immediately, even from the last time it was stopped, which saves a very very large portion of the time
  taken</li>
</ul>
</div>
<h4 id="interesting-log-output">Interesting log output<a class="headerlink" href="#interesting-log-output" title="Permanent link">&para;</a></h4>
<p>You may notice that, if you <a href="#enabling-logging">enabled logging</a>, you get some interesting log output.</p>
<p>Some things you will want to keep an eye out for:</p>
<ul>
<li><code>INFO:niobot.client:Encryption support enabled automatically.</code> - This means that you have set up requirements for the
  bot to use encryption, and it has detected that it can use encryption, and automatically enabled it, which is good!</li>
<li><code>DEBUG:niobot.client:&lt;module '...' from '...'&gt; does not have its own setup() - auto-discovering commands and events</code> - This
  means that the bot has detected a module, and is automatically loading it. This is good for most cases.
  You should only worry about this message if you defined your own setup function.</li>
<li><code>DEBUG:niobot.client:Registered command &lt;Command name='...' aliases=[...] disabled=...&gt; into &lt;command_name&gt;</code> - This simply
  means a command has been added to the internal register.</li>
<li><code>DEBUG:niobot.client:Added event listener &lt;function &lt;function_name&gt; at &lt;address&gt;&gt; for '&lt;event_name&gt;'</code> - Like the above,
  this simply means an event has been added to the internal register.</li>
</ul>
<h3 id="and-thats-it">And that's it!<a class="headerlink" href="#and-thats-it" title="Permanent link">&para;</a></h3>
<p>You've successfully made a bot, and got it running!</p>
<h4 id="wait-how-do-i-use-it">Wait, how do I use it?<a class="headerlink" href="#wait-how-do-i-use-it" title="Permanent link">&para;</a></h4>
<p>nio-bot has a handy dandy auto-join feature - if you just invite your bot's user to a room, assuming all is correct,
within a couple seconds, your bot will automatically join your room!</p>
<p>Then, you can run <code>!help</code> to get a list of commands, and <code>!help &lt;command&gt;</code> to get help on a specific command.</p>
<h3 id="final-product">Final product<a class="headerlink" href="#final-product" title="Permanent link">&para;</a></h3>
<details class="abstract">
<summary>config.py</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">HOMESERVER</span> <span class="o">=</span> <span class="s2">&quot;https://matrix.org&quot;</span>  <span class="c1"># or your homeserver</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">USER_ID</span> <span class="o">=</span> <span class="s2">&quot;@my-bot:matrix.org&quot;</span>  <span class="c1"># your bot account&#39;s user ID</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">ACCESS_TOKEN</span> <span class="o">=</span> <span class="s2">&quot;syt_&lt;...&gt;&quot;</span>  <span class="c1"># your bot account&#39;s access token</span>
</span></code></pre></div>
</details>
<details class="abstract">
<summary>main.py</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">import</span> <span class="nn">niobot</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">import</span> <span class="nn">logging</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="kn">import</span> <span class="nn">config</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;bot.log&quot;</span><span class="p">)</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="n">bot</span> <span class="o">=</span> <span class="n">niobot</span><span class="o">.</span><span class="n">NioBot</span><span class="p">(</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    <span class="n">homeserver</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">HOMESERVER</span><span class="p">,</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">USER_ID</span><span class="p">,</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>    <span class="n">device_id</span><span class="o">=</span><span class="s1">&#39;my-device-id&#39;</span><span class="p">,</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    <span class="n">store_path</span><span class="o">=</span><span class="s1">&#39;./store&#39;</span><span class="p">,</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="n">command_prefix</span><span class="o">=</span><span class="s2">&quot;!&quot;</span><span class="p">,</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>    <span class="n">owner_id</span><span class="o">=</span><span class="s2">&quot;@my-matrix-username:matrix.org&quot;</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="p">)</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="c1"># We also want to load `fun.py`&#39;s commands before starting:</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="n">bot</span><span class="o">.</span><span class="n">mount_module</span><span class="p">(</span><span class="s2">&quot;fun&quot;</span><span class="p">)</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;ready&quot;</span><span class="p">)</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">on_ready</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>    <span class="c1"># That first argument is needed as the first result of the sync loop is passed to ready. Without it, this event</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>    <span class="c1"># will fail to fire, and will cause a potentially catasrophic failure.</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bot is ready!&quot;</span><span class="p">)</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">ping</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>  <span class="c1"># can be invoked with &quot;!ping&quot;</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s2">&quot;Pong!&quot;</span><span class="p">)</span>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="n">bot</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">ACCESS_TOKEN</span><span class="p">)</span>
</span></code></pre></div>
</details>
<details class="abstract">
<summary>fun.py</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">import</span> <span class="nn">niobot</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="k">class</span> <span class="nc">MyFunModule</span><span class="p">(</span><span class="n">niobot</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>  <span class="c1"># subclassing niobot.Module is mandatory for auto-detection.</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">):</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="n">bot</span>  <span class="c1"># bot is the NioBot instance you made in main.py!</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="nd">@niobot</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">!&quot;</span> <span class="o">%</span> <span class="n">ctx</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
</span></code></pre></div>
</details>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>